<!DOCTYPE html>
<html>
<head>
    <title>SecurePass Analyzer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    --card: #1f2e3d;
    --text: white;
}

body.light {
    --bg: #f4f6f9;
    --card: white;
    --text: #222;
}

body {
    margin:0;
    font-family: Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    text-align:center;
    transition:0.3s ease;
}

/* Toggle Button */
.toggle-theme {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 8px 14px;
    background:#00c6ff;
    border:none;
    border-radius:20px;
    cursor:pointer;
    color:white;
    font-size:13px;
    z-index:9999;
}

/* Center Section */
.center-box {
    margin-top:100px;
}

input {
    padding:12px;
    width:300px;
    border-radius:8px;
    border:none;
    outline:none;
}

button {
    padding:10px 16px;
    margin-top:10px;
    border:none;
    border-radius:8px;
    background:#00c6ff;
    color:white;
    cursor:pointer;
    font-weight:bold;
}

/* Results Section */
.results {
    margin-top:60px;
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:25px;
}

.card {
    background: var(--card);
    padding:20px;
    border-radius:15px;
    width:320px;
    text-align:left;
    transition:0.3s ease;
}

/* Circular Score */
.circle {
    width:140px;
    height:140px;
    border-radius:50%;
    background:conic-gradient(#4dff88 0%, #444 0%);
    display:flex;
    align-items:center;
    justify-content:center;
    margin:20px auto;
    font-size:22px;
    font-weight:bold;
}

/* Copy button */
.copy-btn {
    background:#007bff;
    padding:6px 10px;
    border-radius:6px;
    font-size:12px;
    margin-top:5px;
    display:inline-block;
    cursor:pointer;
}

small {
    word-break:break-all;
}

</style>
</head>
<body>

<button class="toggle-theme" onclick="toggleTheme()">ðŸŒ™ / â˜€</button>

<h1>ðŸ›¡ SecurePass Analyzer</h1>

<div class="center-box">
    <form method="POST">
        <input type="password" id="password" name="password" placeholder="Enter password" required>
        <br>
        <button type="submit">Analyze</button>
    </form>

    <div onclick="togglePassword()" style="margin-top:8px; cursor:pointer; color:#00c6ff;">
        Show / Hide Password
    </div>
</div>

{% if result %}
<div class="results">

    <!-- Circular Score -->
    <div class="card" style="text-align:center;">
        <h3>Security Score</h3>
        <div id="scoreCircle" class="circle">
            {{ result.score }}%
        </div>
        <strong style="color: {{ result.color }}">
            {{ result.strength }}
        </strong>
    </div>

    <!-- Security Details -->
    <div class="card">
        <h3>Security Details</h3>
        <p><strong>Entropy:</strong> {{ result.entropy }} bits</p>
        <p><strong>Crack Time:</strong> {{ result.crack_time }}</p>

        <p><strong>SHA-256:</strong></p>
        <small id="hashText">{{ result.hash }}</small>
        <div class="copy-btn" onclick="copyText('hashText')">Copy Hash</div>

        <p><strong>Suggested Password:</strong></p>
        <small id="strongPass">{{ result.strong_password }}</small>
        <div class="copy-btn" onclick="copyText('strongPass')">Copy Password</div>
    </div>

    <!-- Suggestions -->
    <div class="card">
        <h3>AI Suggestions</h3>
        <ul>
            {% for tip in result.suggestions %}
            <li>{{ tip }}</li>
            {% endfor %}
        </ul>
    </div>

</div>
{% endif %}

<script>
// Theme toggle
function toggleTheme(){
    document.body.classList.toggle("light");
    localStorage.setItem("theme",
        document.body.classList.contains("light") ? "light":"dark");
}

// Load saved theme
window.onload = function(){
    if(localStorage.getItem("theme")==="light"){
        document.body.classList.add("light");
    }

    // Animate circular score
    let circle = document.getElementById("scoreCircle");
    if(circle){
        let score = parseInt(circle.innerText);
        circle.style.background =
            `conic-gradient(#4dff88 ${score}%, #444 ${score}%)`;
    }
}

// Show/Hide password
function togglePassword(){
    let x=document.getElementById("password");
    x.type = x.type==="password" ? "text":"password";
}

// Copy to clipboard
function copyText(id){
    let text=document.getElementById(id).innerText;
    navigator.clipboard.writeText(text);
    alert("Copied!");
}
</script>

</body>
</html>

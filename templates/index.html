<!DOCTYPE html>
<html>
<head>
    <title>SecurePass Analyzer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            margin:0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
            color:white;
            text-align:center;
        }

        .center-box {
            margin-top:80px;
        }

        input {
            padding:12px;
            width:300px;
            border-radius:8px;
            border:none;
            outline:none;
        }

        button {
            padding:12px 20px;
            margin-top:10px;
            border:none;
            border-radius:8px;
            background:#00c6ff;
            color:white;
            cursor:pointer;
            font-weight:bold;
        }

        .toggle {
            margin-top:5px;
            font-size:14px;
            cursor:pointer;
            color:#00e6e6;
        }

        .live-score {
            margin-top:20px;
        }

        .progress {
            background:#444;
            border-radius:10px;
            height:10px;
            margin-top:10px;
            width:300px;
            margin-left:auto;
            margin-right:auto;
        }

        .progress-fill {
            height:10px;
            border-radius:10px;
            transition: width 0.3s ease;
        }

        .results {
            margin-top:60px;
            display:flex;
            justify-content:center;
            flex-wrap:wrap;
            gap:20px;
        }

        .card {
            background:#1f2e3d;
            padding:20px;
            border-radius:15px;
            width:300px;
            text-align:left;
        }

    </style>
</head>
<body>

<h1>ðŸ›¡ SecurePass Analyzer</h1>

<div class="center-box">
    <form method="POST">
        <input type="password" id="password" name="password" placeholder="Enter password" required>
        <br>
        <button type="submit">Analyze</button>
    </form>

    <div class="toggle" onclick="togglePassword()">Show / Hide Password</div>

    <!-- REAL TIME SCORE -->
    <div class="live-score">
        <h3 id="strengthText">Strength: -</h3>
        <div class="progress">
            <div id="progressFill" class="progress-fill"></div>
        </div>
    </div>
</div>

{% if result %}
<div class="results">

    <div class="card">
        <h3>Security Score</h3>
        <h2 style="color: {{ result.color }}">{{ result.score }}/100</h2>
        <strong>{{ result.strength }}</strong>
    </div>

    <div class="card">
        <h3>Security Details</h3>
        <p><strong>Entropy:</strong> {{ result.entropy }} bits</p>
        <p><strong>Crack Time:</strong> {{ result.crack_time }}</p>
        <p><strong>SHA-256:</strong></p>
        <small style="word-break:break-all;">{{ result.hash }}</small>
    </div>

    <div class="card">
        <h3>AI Suggestions</h3>
        <ul>
            {% for tip in result.suggestions %}
            <li>{{ tip }}</li>
            {% endfor %}
        </ul>

        <h4>Suggested Strong Password:</h4>
        <small>{{ result.strong_password }}</small>
    </div>

</div>
{% endif %}

<script>
function togglePassword() {
    var x = document.getElementById("password");
    if (x.type === "password") {
        x.type = "text";
    } else {
        x.type = "password";
    }
}

// REAL TIME SCORING (FRONTEND ONLY)
document.getElementById("password").addEventListener("input", function() {

    let password = this.value;
    let score = 0;

    if (password.length >= 8) score += 25;
    if (/[A-Z]/.test(password)) score += 20;
    if (/[0-9]/.test(password)) score += 20;
    if (/[^A-Za-z0-9]/.test(password)) score += 25;

    if (password.length > 12) score += 10;

    if (score > 100) score = 100;

    let strengthText = document.getElementById("strengthText");
    let progressFill = document.getElementById("progressFill");

    progressFill.style.width = score + "%";

    if (score < 40) {
        strengthText.innerHTML = "Strength: Weak";
        progressFill.style.background = "#ff4d4d";
    } else if (score < 70) {
        strengthText.innerHTML = "Strength: Moderate";
        progressFill.style.background = "#ffb84d";
    } else {
        strengthText.innerHTML = "Strength: Strong";
        progressFill.style.background = "#4dff88";
    }
});
</script>

</body>
</html>
